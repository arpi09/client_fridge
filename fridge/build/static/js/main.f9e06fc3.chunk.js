(this.webpackJsonpfridge=this.webpackJsonpfridge||[]).push([[0],{144:function(n,e,t){},145:function(n,e,t){},153:function(n,e,t){"use strict";t.r(e);var r=t(5),i=t(0),o=t.n(i),c=t(16),a=t.n(c),d=(t(144),t(145),t(8)),u=t(21),s=t(63),l=t(73);t(146),t(154);l.a.initializeApp({apiKey:"AIzaSyBmxj_DU4lKt5OksfI5fjdElEH6e5OtCag",authDomain:"fridge-23daa.firebaseapp.com",databaseURL:"https://fridge-23daa.firebaseio.com",projectId:"fridge-23daa",storageBucket:"fridge-23daa.appspot.com",messagingSenderId:"1031873537252",appId:"1:1031873537252:web:9da7e8b281cb8bcb7178f1",measurementId:"G-JP4BL3QTBK"});var f=l.a.auth(),h=(l.a.firestore(),new l.a.auth.GoogleAuthProvider),b=Object(i.createContext)({tokenId:null,userInfo:{}}),j=function(n){var e=n.children,t=Object(i.useState)({tokenId:null,userInfo:{}}),o=Object(d.a)(t,2),c=o[0],a=o[1];return Object(i.useEffect)((function(){f.onAuthStateChanged((function(n){n?n.getIdToken(!1).then((function(e){a({tokenId:e,userInfo:n})})).catch((function(n){console.log(n)})):a({tokenId:null,userInfo:n})}))}),[]),Object(r.jsx)(b.Provider,{value:c,children:e})},g=t(18),p=t(19);function x(){var n=Object(g.a)(["\n  border-radius: 5px;\n  height: 2rem;\n  width: 20rem;\n  margin: 1rem;\n  padding: 1rem;\n  border-width: 1px;\n  border-color: #92b39e;\n"]);return x=function(){return n},n}var O=p.a.input(x()),m=function(n){var e=n.type,t=n.name,i=n.value,o=n.placeholder,c=n.id,a=n.onChange;return Object(r.jsx)(O,{type:e,name:t,value:i,placeholder:o,id:c,onChange:a})};function v(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]);return v=function(){return n},n}function y(){var n=Object(g.a)(["\n  width: 15rem;\n  height: 3rem;\n  margin: 1rem;\n  background-color: #564466;\n  color: #fff;\n  border-width: 0px;\n  border-radius: 5px;\n  box-shadow: 5px 2px 20px 0px rgba(0, 0, 0, 0.2);\n  font-size: 14px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: 0.4s;\n\n  &:hover {\n    background-color: #9f89b3;\n  }\n"]);return y=function(){return n},n}var w=p.a.button(y()),C=p.a.div(v()),k=function(n){var e=n.onClick;return Object(r.jsx)(w,{onClick:e,children:Object(r.jsx)(C,{children:"Sign in"})})};function I(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]);return I=function(){return n},n}function S(){var n=Object(g.a)(["\n  margin-right: 5px;\n  align-items: center;\n  justify-content: center;\n  display: flex;\n"]);return S=function(){return n},n}function E(){var n=Object(g.a)(["\n  width: 15rem;\n  height: 3rem;\n  margin: 1rem;\n  background-color: #fff;\n  color: #9f89b3;\n  border-width: 0px;\n  border-radius: 5px;\n  box-shadow: 5px 2px 20px 0px rgba(0, 0, 0, 0.2);\n  font-size: 14px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: 0.4s;\n\n  &:hover {\n    background-color: #564466;\n    color: #fff;\n  }\n"]);return E=function(){return n},n}var T=p.a.button(E()),z=p.a.div(S()),A=p.a.div(I()),F=function(n){var e=n.text,t=n.icon,i=n.onClick;return Object(r.jsx)(T,{onClick:i,children:Object(r.jsxs)(A,{children:[Object(r.jsx)(z,{children:t}),e]})})};function P(){var n=Object(g.a)(["\n  margin-bottom: 5rem;\n"]);return P=function(){return n},n}function B(){var n=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  background-color: #92b39e;\n"]);return B=function(){return n},n}var D=p.a.div(B()),G=p.a.h1(P()),N=t(114),L=function(){var n=Object(i.useState)(""),e=Object(d.a)(n,2),t=e[0],o=e[1],c=Object(i.useState)(""),a=Object(d.a)(c,2),l=a[0],j=a[1],g=Object(i.useState)(null),p=Object(d.a)(g,2),x=p[0],O=p[1],v=Object(u.f)(),y=Object(i.useContext)(b),w=function(n){n.preventDefault(),f.signInWithPopup(h)},C=function(n){var e=n.currentTarget,t=e.name,r=e.value;"userEmail"===t?o(r):"userPassword"===t&&j(r)};return Object(i.useEffect)((function(){y.userInfo&&0!==Object.keys(y.userInfo).length&&v.push("/")}),[y]),Object(r.jsxs)(D,{children:[Object(r.jsx)(G,{children:"My fridge"}),null!==x&&Object(r.jsx)("div",{children:x}),Object(r.jsx)(m,{type:"email",name:"userEmail",value:t,placeholder:"Email",id:"userEmail",onChange:function(n){return C(n)}}),Object(r.jsx)(m,{type:"password",name:"userPassword",value:l,placeholder:"Password",id:"userPassword",onChange:function(n){return C(n)}}),Object(r.jsx)(k,{onClick:function(n){!function(n){n.preventDefault(),f.signInWithEmailAndPassword(t,l).catch((function(n){O("Error signing in with password and email!")}))}(n)}}),Object(r.jsx)("div",{style:{width:"15%",borderTop:"1px solid #fff",borderRadius:"5px"}}),Object(r.jsx)(F,{text:"Sign in with Google",icon:Object(r.jsx)(N.a,{}),onClick:function(n){w(n)}}),Object(r.jsxs)("p",{style:{color:"#fff"},children:["Don't have an account? ",Object(r.jsx)(s.b,{to:"signUp",children:"Sign up here"})]}),Object(r.jsx)(s.b,{to:"passwordReset",children:"Forgot Password?"})]})},R=t(44),M=t(28),U=Object(i.createContext)({fridges:[],fridge:{}}),J=function(n){var e=n.children,t=Object(i.useState)({fridges:[],fridge:{},selectedFridgeId:null,loading:!0}),o=Object(d.a)(t,2),c=o[0],a=o[1];Object(i.useEffect)((function(){f.onAuthStateChanged((function(n){n&&n.getIdToken(!0).then((function(n){a(Object(M.a)(Object(M.a)({},c),{},{loading:!0})),fetch("https://us-central1-fridge-23daa.cloudfunctions.net/app/api/user/fridges",{method:"GET",headers:{Authorization:n,"Content-Type":"application/json"}}).then((function(n){return n.json()})).then((function(e){var t=e;if(0!==e.length){var r=t[0].id;fetch("https://us-central1-fridge-23daa.cloudfunctions.net/app/api/user/fridge/".concat(r),{method:"GET",headers:{Authorization:n,"Content-Type":"application/json"}}).then((function(n){return n.json()})).then((function(n){a({fridges:t,fridge:n,selectedFridgeId:r,loading:!1})}))}}))})).catch((function(n){console.log(n)}))}))}),[]);return Object(r.jsx)(U.Provider,{value:{fridgeData:c,setFridge:function(n){f.onAuthStateChanged((function(e){e&&e.getIdToken(!0).then((function(e){a(Object(M.a)(Object(M.a)({},c),{},{loading:!0})),fetch("https://us-central1-fridge-23daa.cloudfunctions.net/app/api/user/fridge/".concat(n),{method:"GET",headers:{Authorization:e,"Content-Type":"application/json"}}).then((function(n){return n.json()})).then((function(e){a((function(t){return Object(M.a)(Object(M.a)({},t),{},{fridge:e,selectedFridgeId:n,loading:!1})}))}))}))}))},addGrocery:function(n){f.onAuthStateChanged((function(e){e&&e.getIdToken(!0).then((function(e){a(Object(M.a)(Object(M.a)({},c),{},{loading:!0})),fetch("https://us-central1-fridge-23daa.cloudfunctions.net/app/api/user/fridge/".concat(c.selectedFridgeId,"/grocery"),{method:"POST",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).then((function(n){a((function(e){return Object(M.a)(Object(M.a)({},e),{},{fridge:n,loading:!1})}))}))}))}))},deleteGrocery:function(n){f.onAuthStateChanged((function(e){e&&e.getIdToken(!0).then((function(e){a(Object(M.a)(Object(M.a)({},c),{},{loading:!0})),fetch("https://us-central1-fridge-23daa.cloudfunctions.net/app/api/user/fridge/".concat(c.selectedFridgeId,"/grocery"),{method:"DELETE",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify({groceries:n})}).then((function(n){return n.json()})).then((function(n){a((function(e){return Object(M.a)(Object(M.a)({},e),{},{fridge:n,loading:!1})}))}))}))}))}},children:e})};function W(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]);return W=function(){return n},n}function K(){var n=Object(g.a)(["\n  width: 6rem;\n  height: 2rem;\n  margin: 1rem;\n  background-color: #564466;\n  color: #fff;\n  border-width: 0px;\n  border-radius: 5px;\n  font-size: 14px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: 0.4s;\n\n  &:hover {\n    background-color: #9f89b3;\n  }\n"]);return K=function(){return n},n}var H=p.a.button(K()),Q=p.a.div(W()),X=function(n){var e=n.onClick;return Object(r.jsx)(H,{onClick:e,children:Object(r.jsx)(Q,{children:"Sign out"})})};function _(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]);return _=function(){return n},n}function q(){var n=Object(g.a)(["\n  width: 8rem;\n  height: 3rem;\n  margin: 0.5rem;\n  background-color: ",";\n  background-color: ",";\n  background-color: ",";\n  color: #fff;\n  border-width: 0px;\n  border-radius: 5px;\n  box-shadow: ",";\n  font-size: 14px;\n  font-weight: bold;\n  cursor: ",';\n  transition: 0.4s;\n\n  &:hover {\n    background-color: "#564466";\n  }\n']);return q=function(){return n},n}var V=p.a.button(q(),(function(n){return n.primary&&(n.disabled?"#b4a6bf":"#564466")}),(function(n){return n.secondary&&(n.disabled?"#BEA69F":"#A07163")}),(function(n){return n.delete&&(n.disabled?"#e09b96":"#e84c41")}),(function(n){return!n.disabled&&"5px 2px 20px 0px rgba(0, 0, 0, 0.2)"}),(function(n){return!n.disabled&&"pointer"})),Y=p.a.div(_()),Z=function(n){var e=n.onClick,t=n.text,i=n.disabled,o=n.primary,c=n.secondary;return Object(r.jsx)(V,{onClick:e,primary:o,secondary:c,disabled:i,children:Object(r.jsx)(Y,{children:t})})},$=function(n){var e=n.display,t=n.addFunction,o=n.title,c=n.onClose,a=Object(i.useState)(""),u=Object(d.a)(a,2),s=u[0],l=u[1],f=Object(i.useState)(""),h=Object(d.a)(f,2),b=h[0],j=h[1];return Object(r.jsxs)("div",{style:{alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",position:"absolute",display:e?"flex":"none"},children:[Object(r.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",position:"absolute",top:0,left:0,height:"100vh",width:"100vw",zIndex:1,display:e?"":"none"},onClick:function(){return c()}}),Object(r.jsxs)("div",{style:{backgroundColor:"#ffffff",height:"60vh",width:"40vw",borderRadius:5,position:"absolute",zIndex:2,display:e?"":"none"},children:[Object(r.jsx)("p",{style:{fontWeight:"bold",position:"absolute",top:15,right:15,margin:0,zIndex:2,fontSize:22,cursor:"pointer"},onClick:function(){return c()},children:"X"}),Object(r.jsx)("h2",{style:{margin:20},children:o}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(r.jsx)("h4",{style:{margin:"50px 0px 0px 20px"},children:"Name"}),Object(r.jsx)(m,{name:"addNewGroceryNameInput",onChange:function(n){return l(n.target.value)}}),Object(r.jsx)("h4",{style:{margin:"15px 0px 0px 20px"},children:"BestBefore"}),Object(r.jsx)(m,{name:"addNewGroceryDateInput",onChange:function(n){return j(n.target.value)}}),Object(r.jsx)(Z,{onClick:function(){return t(s,b)},text:"Add",primary:!0,disabled:""===s})]})]})]})};function nn(){var n=Object(g.a)(["\n  height: 100%;\n  width: 4rem;\n  border-radius: 5px;\n  border-width: 0px;\n"]);return nn=function(){return n},n}function en(){var n=Object(g.a)(["\n  font-size: 42px;\n  margin-left: 2.5rem;\n"]);return en=function(){return n},n}function tn(){var n=Object(g.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n"]);return tn=function(){return n},n}function rn(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  margin-right: 1.5rem;\n"]);return rn=function(){return n},n}function on(){var n=Object(g.a)(["\n  height: 3rem;\n  width: auto;\n  border-radius: 3rem;\n  margin-left: 1rem;\n"]);return on=function(){return n},n}function cn(){var n=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  height: 3rem;\n  width: 100%;\n  justify-content: flex-end;\n  background-color: #transparent;\n  position: absolute;\n  top: 0px;\n  padding-top: 1rem;\n"]);return cn=function(){return n},n}function an(){var n=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  background-color: #92b39e;\n\n  .MuiDataGrid-root {\n    background-color: #fff;\n  }\n"]);return an=function(){return n},n}var dn=p.a.div(an()),un=p.a.div(cn()),sn=p.a.img(on()),ln=p.a.div(rn()),fn=p.a.div(tn()),hn=p.a.h2(en()),bn=(p.a.button(nn()),t(111)),jn=function(){var n,e=Object(u.f)(),t=Object(i.useContext)(b),o=Object(i.useContext)(U),c=o.fridgeData,a=o.setFridge,s=o.addGrocery,l=o.deleteGrocery,h=t||{userInfo:{displayName:"",email:"",photoURL:""}},j=h.userInfo,g=(h.tokenId,c.fridge),p=c.fridges,x=c.loading,O=g.groceries||[],m=Object(i.useState)(!1),v=Object(d.a)(m,2),y=v[0],w=v[1],C=Object(i.useState)([]),k=Object(d.a)(C,2),I=k[0],S=k[1];Object(i.useEffect)((function(){null===j&&e.push("/login")}),[t]);return Object(r.jsxs)(dn,{children:[Object(r.jsx)($,{display:y,title:"Add grocery",addFunction:function(n,e){return function(n,e){var t={name:n,bestBefore:e};w(!1),s(t)}(n,e)},onClose:function(){return w()}}),null!==j&&Object(r.jsxs)(un,{children:[Object(r.jsx)(fn,{children:Object(r.jsx)(hn,{children:"My Fridge"})}),Object(r.jsxs)(ln,{children:[Object(r.jsx)("h2",{style:{width:"max-content"},children:j.displayName}),j.photoURL&&Object(r.jsx)(sn,{src:j.photoURL,alt:"Profile Image"}),Object(r.jsx)(X,{onClick:function(){f.signOut()}})]})]}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"80%",padding:10},children:[Object(r.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-start",width:"50%",height:"100%"},children:[Object(r.jsx)(Z,{onClick:function(){return w(!0)},text:"Add grocery",primary:!0}),Object(r.jsx)(Z,{onClick:function(){return l(I),void S([])},text:"Delete groceries",secondary:!0,disabled:0===I.length})]}),Object(r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"50%",height:"100%"},children:Object(r.jsx)("select",{name:"fridges",onChange:function(n){return a(n.target.value)},style:{borderWidth:"0px",borderRadius:"5px",width:"15rem",height:"3rem",fontSize:"18px"},children:p&&p.map((function(n){return Object(r.jsx)("option",{value:n.id,children:n.name},n.id)}))})})]}),Object(r.jsx)("div",{style:(n={display:"flex",height:"100%",width:"100%"},Object(R.a)(n,"width","80%"),Object(R.a)(n,"height","50%"),n),children:Object(r.jsx)(bn.a,{rows:O,columns:[{field:"name",headerName:"Name",flex:1},{field:"bestBefore",headerName:"Best Before",flex:1}],pageSize:5,checkboxSelection:!0,autoPageSize:!0,loading:x,onSelectionModelChange:function(n){S(n.selectionModel)}})})]})};var gn=function(){return Object(r.jsx)(j,{children:Object(r.jsx)(s.a,{children:Object(r.jsx)("div",{style:{height:"100vh"},children:Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/login",children:Object(r.jsx)(L,{})}),Object(r.jsx)(u.a,{path:"/",children:Object(r.jsx)(J,{children:Object(r.jsx)(jn,{})})})]})})})})},pn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,204)).then((function(e){var t=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;t(n),r(n),i(n),o(n),c(n)}))};a.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(gn,{})}),document.getElementById("root")),pn()}},[[153,1,2]]]);
//# sourceMappingURL=main.f9e06fc3.chunk.js.map